import { Zone } from '../types/storage';

interface SpaceStationSVGProps {
  zones: Zone[];
  onSelectZone: (zone: Zone) => void;
  hoveredZone: string | null;
  onZoneHover: (zoneId: string | null) => void;
}

export default function SpaceStationSVG({ zones, onSelectZone, hoveredZone, onZoneHover }: SpaceStationSVGProps) {
  const getZonePath = (zoneName: string) => {
    const paths: { [key: string]: string } = {
      'Service Module': 'M434.595 273V279.5L431.595 283V319.5L434.595 324.5V330M434.595 273V266.5C426.515 260.51 423.92 255.218 422.595 242.5C415.138 231.531 415.201 224.652 422.595 211C421.148 195.727 423.979 188.465 434.595 177.5H470.595C480.494 186.601 483.126 194.112 483.595 211C490.776 223.301 490.737 230.199 483.595 242.5C483.222 253.831 480.68 259.212 470.595 266.5V273M434.595 273H470.595M470.595 273V279.5L474.595 283H483.595V319.5H474.595L470.595 324.5V330M434.595 330V349.5L406.595 379H500.595L470.595 349.5V330M434.595 330H470.595',
      'Russian Laboratory': 'M6.59507 292.5V265.5L20.5951 271V214.5H58.5954V273.5H101.095L118.595 277.5C138.72 267.607 149.999 268.556 170.095 282.5H177.095V321.5H170.095C151.208 337.429 139.947 338.507 118.595 325.5L101.095 329H58.5954V390.5H20.5951V333L6.59507 339V312C-0.814506 305.231 -0.915371 300.96 6.59507 292.5Z',
      'US Laboratory': 'M483.595 319.5V283H502.595L531.095 258.5V252H562.095L573.095 258.5L576.595 252H590.595V256H639.595L642.595 260L647.595 254H723.595L729.595 262C742.804 262.007 743.056 280.007 729.595 280L737.595 284.5V321.5L722.095 330.5V349H647.595L642.595 340L639.595 346H627.595L626.095 349H599.095V343H590.595V349H576.595L573.095 343L569.095 349H531.095L502.595 319.5H483.595Z',
      'European Laboratory': 'M471.095 633H434.095L424.595 622.5L419.095 599L431.095 590L434.095 585.5L433.032 583.5L412.595 593V570H417.595V562H396.095V531.5H407.595L414.595 513.5V498.5H419.095V492.5L410.595 488V393L405.595 388.5V378.5H501.095V400H636.095V482.5H502.595V440H494.095V447L498.595 449.5V472.5L494.095 476V490H486.595V541H493.095H503.595V557H487.595V562L471.095 585.5L474.095 590C474.095 590 516.775 590.001 530.595 590C544.415 589.999 542.843 624.999 530.595 625C518.348 625.001 515.095 625 515.095 625V644H493.095V626H474.095L471.095 629V633Z',
      'Japanese Laboratory': 'M177.095 322V277H170.095C164.965 266.651 164.363 260.849 170.095 250.5H177.095L186.595 246V253.5H243.595H302.595L328.095 267.5H360.595L355.595 262H383.095V267.5H412.095V273L431.595 283V320.5L412.095 330.5V335.5H338.095L342.095 342.5H322.095L325.095 335.5L302.595 350V355.5H287.595L278.595 350H243.595H182.095V330.5L177.095 322Z',
      'Cupola': 'M442.095 803.5H415.095L420.595 789.5H364.095V751.5H423.095V709L427.095 691.5C417.202 671.375 418.151 660.097 432.095 640V633H471.095V640C487.024 658.888 488.102 670.148 475.095 691.5L478.595 709V751.5H540.095V789.5H482.595L488.595 803.5H461.595C454.826 810.91 450.555 811.011 442.095 803.5Z',
      'Storage Area 1': 'M462.095 6.59507H489.095L483.595 20.5951H540.095V58.5954H481.095V101.095L477.095 118.595C486.989 138.72 486.04 149.999 472.095 170.095V177.095H433.095V170.095C417.167 151.208 416.089 139.947 429.095 118.595L425.595 101.095V58.5954H364.095V20.5951H421.595L415.595 6.59507H442.595C449.364 -0.814506 453.636 -0.915371 462.095 6.59507Z',
      'Airlock': 'M177.095 322V277H170.095C164.965 266.651 164.363 260.849 170.095 250.5H177.095L186.595 246V253.5H243.595H302.595L328.095 267.5H360.595L355.595 262H383.095V267.5H412.095V273L431.595 283V320.5L412.095 330.5V335.5H338.095L342.095 342.5H322.095L325.095 335.5L302.595 350V355.5H287.595L278.595 350H243.595H182.095V330.5L177.095 322Z',
      'Crew Quarters': 'M442.095 803.5H415.095L420.595 789.5H364.095V751.5H423.095V709L427.095 691.5C417.202 671.375 418.151 660.097 432.095 640V633H471.095V640C487.024 658.888 488.102 670.148 475.095 691.5L478.595 709V751.5H540.095V789.5H482.595L488.595 803.5H461.595C454.826 810.91 450.555 811.011 442.095 803.5Z',
      'Docking Area 1': 'M6.59507 292.5V265.5L20.5951 271V214.5H58.5954V273.5H101.095L118.595 277.5C138.72 267.607 149.999 268.556 170.095 282.5H177.095V321.5H170.095C151.208 337.429 139.947 338.507 118.595 325.5L101.095 329H58.5954V390.5H20.5951V333L6.59507 339V312C-0.814506 305.231 -0.915371 300.96 6.59507 292.5Z',
      'Docking Area 2': 'M462.095 6.59507H489.095L483.595 20.5951H540.095V58.5954H481.095V101.095L477.095 118.595C486.989 138.72 486.04 149.999 472.095 170.095V177.095H433.095V170.095C417.167 151.208 416.089 139.947 429.095 118.595L425.595 101.095V58.5954H364.095V20.5951H421.595L415.595 6.59507H442.595C449.364 -0.814506 453.636 -0.915371 462.095 6.59507Z',
      'Docking Area 3': 'M471.095 633H434.095L424.595 622.5L419.095 599L431.095 590L434.095 585.5L433.032 583.5L412.595 593V570H417.595V562H396.095V531.5H407.595L414.595 513.5V498.5H419.095V492.5L410.595 488V393L405.595 388.5V378.5H501.095V400H636.095V482.5H502.595V440H494.095V447L498.595 449.5V472.5L494.095 476V490H486.595V541H493.095H503.595V557H487.595V562L471.095 585.5L474.095 590C474.095 590 516.775 590.001 530.595 590C544.415 589.999 542.843 624.999 530.595 625C518.348 625.001 515.095 625 515.095 625V644H493.095V626H474.095L471.095 629V633Z',
      'Docking Area 4': 'M483.595 319.5V283H502.595L531.095 258.5V252H562.095L573.095 258.5L576.595 252H590.595V256H639.595L642.595 260L647.595 254H723.595L729.595 262C742.804 262.007 743.056 280.007 729.595 280L737.595 284.5V321.5L722.095 330.5V349H647.595L642.595 340L639.595 346H627.595L626.095 349H599.095V343H590.595V349H576.595L573.095 343L569.095 349H531.095L502.595 319.5H483.595Z',
      'Storage Area 2': 'M434.595 273V279.5L431.595 283V319.5L434.595 324.5V330M434.595 273V266.5C426.515 260.51 423.92 255.218 422.595 242.5C415.138 231.531 415.201 224.652 422.595 211C421.148 195.727 423.979 188.465 434.595 177.5H470.595C480.494 186.601 483.126 194.112 483.595 211C490.776 223.301 490.737 230.199 483.595 242.5C483.222 253.831 480.68 259.212 470.595 266.5V273M434.595 273H470.595M470.595 273V279.5L474.595 283H483.595V319.5H474.595L470.595 324.5V330M434.595 330V349.5L406.595 379H500.595L470.595 349.5V330M434.595 330H470.595',
      'Storage Area 3': 'M177.095 322V277H170.095C164.965 266.651 164.363 260.849 170.095 250.5H177.095L186.595 246V253.5H243.595H302.595L328.095 267.5H360.595L355.595 262H383.095V267.5H412.095V273L431.595 283V320.5L412.095 330.5V335.5H338.095L342.095 342.5H322.095L325.095 335.5L302.595 350V355.5H287.595L278.595 350H243.595H182.095V330.5L177.095 322Z'
    };
    return paths[zoneName] || '';
  };

  return (
    <div className="flex items-center justify-center w-full h-full">
      <svg 
        viewBox="0 0 1000 1000" 
        className="w-full h-full max-w-[1200px]"
        preserveAspectRatio="xMidYMid meet"
      >
        <g transform="scale(1.35) translate(100, 100)">
          {zones.map(zone => (
            <g key={zone.id}>
              <path
                d={getZonePath(zone.name)}
                className={`
                  transition-all duration-300 cursor-pointer
                  ${hoveredZone === zone.id ? 'fill-blue-500/50' : 'fill-gray-700/50'}
                  stroke-blue-400 stroke-2
                `}
                onClick={() => onSelectZone(zone)}
                onMouseEnter={() => onZoneHover(zone.id)}
                onMouseLeave={() => onZoneHover(null)}
              />
              <text
                x={getZoneTextPosition(zone.name).x}
                y={getZoneTextPosition(zone.name).y}
                className="fill-white text-[10px] font-bold pointer-events-none"
                textAnchor="middle"
                transform={`translate(0,${getZoneTextPosition(zone.name).yOffset || 0})`}
              >
                <tspan x={getZoneTextPosition(zone.name).x} dy="0">
                  {zone.name}
                </tspan>
                <tspan x={getZoneTextPosition(zone.name).x} dy="12" className="text-[8px]">
                  {zone.containers.length} containers
                </tspan>
                <tspan x={getZoneTextPosition(zone.name).x} dy="12" className="text-[8px]">
                  {zone.containers.reduce((acc, cont) => acc + cont.items.length, 0)} items
                </tspan>
              </text>
            </g>
          ))}
        </g>
      </svg>
    </div>
  );
}

function getZoneTextPosition(zoneName: string) {
  const positions: { [key: string]: { x: number, y: number, yOffset?: number } } = {
    'Service Module': { x: 452, y: 280, yOffset: 0 },
    'US Laboratory': { x: 560, y: 290, yOffset: 0 },
    'Russian Laboratory': { x: 90, y: 290, yOffset: 0 },
    'European Laboratory': { x: 470, y: 600, yOffset: 0 },
    'Japanese Laboratory': { x: 300, y: 290, yOffset: 0 },
    'Airlock': { x: 420, y: 290, yOffset: -10 },
    'Crew Quarters': { x: 452, y: 770, yOffset: 0 },
    'Cupola': { x: 452, y: 50, yOffset: 20 },
    'Docking Area 1': { x: 120, y: 290, yOffset: 0 },
    'Docking Area 2': { x: 680, y: 290, yOffset: 0 },
    'Docking Area 3': { x: 452, y: 610, yOffset: 0 },
    'Docking Area 4': { x: 452, y: 100, yOffset: 0 },
    'Storage Area 1': { x: 440, y: 80, yOffset: 0 },
    'Storage Area 2': { x: 500, y: 290, yOffset: 0 },
    'Storage Area 3': { x: 452, y: 500, yOffset: 0 }
  };
  return positions[zoneName] || { x: 0, y: 0, yOffset: 0 };
}
